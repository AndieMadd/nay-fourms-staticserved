(function(t){function e(e){for(var o,i,a=e[0],c=e[1],u=e[2],p=0,m=[];p<a.length;p++)i=a[p],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&m.push(s[i][0]),s[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(m.length)m.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(o=!1)}o&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},s={app:0},r=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"019d":function(t,e,n){"use strict";n("9763")},"034f":function(t,e,n){"use strict";n("85ec")},"040d":function(t,e,n){},"2b85":function(t,e,n){},"3b63":function(t,e,n){"use strict";n("dd43")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"nav"},[n("div",{staticClass:"nav-item homeNav"},[n("button",{staticClass:"back",on:{click:function(e){return t.setPage("Prev")}}},[t._v("ðŸ¡„")]),n("button",{on:{click:function(e){return t.setPage("Home")}}},[t._v("Home")])]),this.$store.state.isLoggedIn?n("div",{staticClass:"nav-item userDetails"},[n("button",{on:{click:t.logout}},[t._v("Log Out")]),n("p",[t._v(t._s(this.$store.state.currentUserName))]),n("img",{attrs:{src:this.$store.state.currentUserPFP,alt:""}})]):n("div",{staticClass:"nav-item loginButton"},[n("button",{on:{click:function(e){return t.setPage("Login")}}},[t._v("Login")])])]),"Home"==this.$store.getters.pageState?n("div",[n("Home")],1):"Login"==this.$store.getters.pageState?n("div",[n("Login")],1):"forum"==this.$store.getters.pageState?n("div",[n("Forum")],1):"Post"==this.$store.getters.pageState?n("div",[n("postPage")],1):t._e()])},r=[],i=(n("d3b7"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("div",{staticClass:"forums-wrapper"},t._l(t.forums,(function(t){return n("div",{key:t.id,staticClass:"forumLink"},[n("forumLink",{attrs:{forum:t}})],1)})),0)])}),a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"titles"},[n("h1",[t._v("Home")]),n("h2",[t._v("Available Forums")])])}],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{on:{click:t.findForum}},[t._v(t._s(t.forum.token)+" : "+t._s(t.forum.title))])])},u=[],l={name:"forumLink",props:{forum:Object},methods:{findForum:function(){var t=this;fetch("/api/forum/".concat(this.forum.token),{method:"POST"}).then((function(t){return t.json()})).then((function(e){t.$store.dispatch("setCurrentForumData",[t.forum.token,e])}))}}},p=l,m=(n("fc0a"),n("2877")),f=Object(m["a"])(p,c,u,!1,null,"ba7e53c2",null),d=f.exports,v={name:"Home",methods:{switchToLogin:function(){this.$store.commit("switchPage","login")}},data:function(){return{forums:[]}},mounted:function(){var t=this;setInterval((function(){t.forums=t.$store.state.availableForums}),0)},components:{forumLink:d}},h=v,g=(n("6218"),Object(m["a"])(h,i,a,!1,null,"05ae5b12",null)),P=g.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[t._m(0),n("div",{staticClass:"loginButton"},[n("GoogleLogin",{attrs:{params:t.params,onSuccess:t.onSuccess,onFailure:t.onFailure}},[t._v("Sign In With Google")])],1)])},C=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"titleText"},[n("h1",[t._v("Please Login With Google To Continue")])])}],_=n("e571"),y={name:"Login",components:{GoogleLogin:_["GoogleLogin"]},data:function(){return{params:{client_id:"897864354621-el118c9a3qd729f7joaad2fitj5f4t8e.apps.googleusercontent.com"}}},methods:{onSuccess:function(t){var e=this;if(-1==t.getBasicProfile().getEmail().indexOf("@nayland.school.nz"))return alert("Please Log In With A Nayland College Account!"),0;var n=t.getAuthResponse().id_token,o={token:n};fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(t){return t.json()})).then((function(t){e.$store.commit("userLoggedIn",t),e.$store.commit("switchPage","Home")}))},onFailure:function(){console.log("fail")}}},S=y,w=(n("b339"),Object(m["a"])(S,b,C,!1,null,"0332f282",null)),$=w.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[1==t.isPosting?n("div",[n("postcover")],1):t._e(),n("h1",[t._v("Forums")]),n("h4",[t._v(t._s(t.name))]),t._l(t.posts,(function(t){return n("div",{key:t.id,staticClass:"post"},[n("postComponent",{attrs:{title:t.title,content:t.content,user:t.name,timeCreated:t.timeCreated,postID:t.id}})],1)})),n("div",{staticClass:"addPost"},[this.$store.state.isLoggedIn?n("button",{on:{click:t.addPost}},[t._v(" Ask Something! ")]):n("div",[n("p",[t._v("Please Log In To Add A Post!")])])])],2)},O=[],T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"darkened"},[n("div",{staticClass:"centered"},[n("div",{staticClass:"inputs"},[n("label",{attrs:{for:"postTitle"}},[t._v(" Post Title "),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newPostTitle,expression:"newPostTitle"}],attrs:{type:"text",name:"postTitle",id:"postTitle"},domProps:{value:t.newPostTitle},on:{input:function(e){e.target.composing||(t.newPostTitle=e.target.value)}}})]),n("br"),n("label",{attrs:{for:"postContent"}},[t._v(" Post content"),n("br"),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newPostContent,expression:"newPostContent"}],staticStyle:{resize:"none"},attrs:{name:"postContent",id:"postContent",cols:"24",rows:"8"},domProps:{value:t.newPostContent},on:{input:function(e){e.target.composing||(t.newPostContent=e.target.value)}}})]),n("br")]),n("div",{staticClass:"buttons"},[n("button",{staticClass:"submit",on:{click:t.submit}},[t._v("Submit")]),n("button",{staticClass:"cancel",on:{click:t.cancel}},[t._v("Cancel")])])])])])},j=[],F=n("1da1"),x=(n("96cf"),{name:"postcover",data:function(){return{currentForum:this.$store.state.currentForum,newPostTitle:"",newPostContent:""}},methods:{cancel:function(){this.$store.commit("setPostStatus",!1)},submit:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n={title:t.newPostTitle,content:t.newPostContent,forum:t.currentForum},fetch("/api/addPost",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json})).then((function(e){console.log(e),t.$store.dispatch("updateCurrentForum"),t.$store.commit("setPostStatus",!1)}));case 2:case"end":return e.stop()}}),e)})))()}}}),L=x,R=(n("019d"),Object(m["a"])(L,T,j,!1,null,"46052ffa",null)),I=R.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"postBlock",on:{click:t.goToPost}},[n("div",{staticClass:"postContent"},[n("h3",[t._v(t._s(t.title)+" -- "+t._s(t.user)+" ("+t._s(t.getDate(t.timeCreated))+")")]),n("p",[t._v(t._s(t.content))])])])])},N=[],D=(n("a9e3"),{name:"postComponent",props:{title:String,content:String,user:String,timeCreated:String,postID:Number},methods:{getDate:function(t){return new Date(Number(t)).toLocaleDateString()},goToPost:function(){var t=this;fetch("/api/post/".concat(this.postID),{method:"POST"}).then((function(t){return t.json()})).then((function(e){t.$store.commit("setAvailableReplies",e)})),this.$store.commit("setCurrentPost",{title:this.title,content:this.content,id:this.postID})}}}),E=D,H=(n("8ad9"),Object(m["a"])(E,A,N,!1,null,"824b3174",null)),U=H.exports,B={name:"Forum",data:function(){return{name:this.$store.state.currentForum}},methods:{addPost:function(){this.$store.commit("setPostStatus",!0)}},computed:{isPosting:function(){return this.$store.state.isAddingPost},posts:function(){return this.$store.state.forumPosts}},components:{postcover:I,postComponent:U}},J=B,G=(n("f855"),Object(m["a"])(J,k,O,!1,null,"54aeb7b0",null)),M=G.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isPosting?n("div",[n("replypostcover")],1):t._e(),n("h1",[t._v(t._s(t.currentPostContent.title))]),n("p",[t._v(t._s(t.currentPostContent.content))]),t._l(t.postReplies,(function(t){return n("div",{key:t.id},[n("replyComponent",{attrs:{content:t.content,user:t.name}})],1)})),this.$store.state.isLoggedIn?n("div",{staticClass:"addReply"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.replyContent,expression:"replyContent"}],attrs:{type:"text"},domProps:{value:t.replyContent},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendReply.apply(null,arguments)},input:function(e){e.target.composing||(t.replyContent=e.target.value)}}}),n("button",{on:{click:t.sendReply}},[t._v("Add Reply")])]):n("div",[n("h2",[t._v("Please Log In To Reply!")])])],2)},W=[],q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"postBlock"},[n("div",{staticClass:"postContent"},[n("h3",[t._v(t._s(t.user))]),n("p",[t._v(t._s(t.content))])])])])},K=[],Q={name:"replyComponent",props:{content:String,user:String}},V=Q,X=(n("3b63"),Object(m["a"])(V,q,K,!1,null,"9c2d494c",null)),Y=X.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"darkened"},[n("div",{staticClass:"centered"},[n("div",{staticClass:"inputs"},[n("label",{attrs:{for:"postTitle"}},[t._v(" Post Title "),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newPostTitle,expression:"newPostTitle"}],attrs:{type:"text",name:"postTitle",id:"postTitle"},domProps:{value:t.newPostTitle},on:{input:function(e){e.target.composing||(t.newPostTitle=e.target.value)}}})]),n("br"),n("label",{attrs:{for:"postContent"}},[t._v(" Post content"),n("br"),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newPostContent,expression:"newPostContent"}],staticStyle:{resize:"none"},attrs:{name:"postContent",id:"postContent",cols:"24",rows:"8"},domProps:{value:t.newPostContent},on:{input:function(e){e.target.composing||(t.newPostContent=e.target.value)}}})]),n("br")]),n("div",{staticClass:"buttons"},[n("button",{staticClass:"submit",on:{click:t.submit}},[t._v("Submit")]),n("button",{staticClass:"cancel",on:{click:t.cancel}},[t._v("Cancel")])])])])])},tt=[],et={name:"replypostcover",data:function(){return{currentPost:this.$store.state.currentPost,newPostTitle:"",newPostContent:""}},methods:{cancel:function(){this.$store.commit("setPostStatus",!1)},submit:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n={title:t.newPostTitle,content:t.newPostContent,post:t.currentPost},fetch("/api/addReply",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json})).then((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()}}},nt=et,ot=(n("7836"),Object(m["a"])(nt,Z,tt,!1,null,"70bfc632",null)),st=ot.exports,rt={name:"postPage",data:function(){return{replyContent:""}},components:{replyComponent:Y,replypostcover:st},computed:{postReplies:function(){return this.$store.state.postReplies},isPosting:function(){return this.$store.state.isAddingPost},currentPostContent:function(){return this.$store.state.currentPost}},methods:{sendReply:function(){var t=this;console.log("Reply ".concat(this.replyContent));var e={content:this.replyContent,post:this.currentPostContent.id};fetch("/api/addReply",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){console.log(e),t.$store.dispatch("updateCurrentPost"),t.replyContent=""}))}}},it=rt,at=Object(m["a"])(it,z,W,!1,null,"e06bd60c",null),ct=at.exports,ut={name:"App",components:{Home:P,Login:$,Forum:M,postPage:ct},mounted:function(){var t=this;fetch("/api/forums",{method:"POST"}).then((function(t){return t.json()})).then((function(e){t.$store.commit("setForums",e)})).catch((function(t){console.log(t)}))},methods:{setPage:function(t){"Prev"==t?this.$store.dispatch("goBack"):this.$store.commit("switchPage",t)},logout:function(){this.$store.commit("logout")}}},lt=ut,pt=(n("034f"),Object(m["a"])(lt,s,r,!1,null,null,null)),mt=pt.exports,ft=n("2909"),dt=(n("99af"),n("b0c0"),n("2f62"));o["a"].use(dt["a"]);var vt=new dt["a"].Store({state:{allPages:["Home","Login"],pageState:"Home",prevState:["Home"],availableForums:[],currentForum:"",currentPost:{},currentPostID:"",forumPosts:[],postReplies:[],isAddingPost:!1,isLoggedIn:!1,currentUserName:"",currentUserPFP:""},mutations:{switchPage:function(t,e){t.prevState="Home"==e?["Home"]:[].concat(Object(ft["a"])(t.prevState),[t.pageState]),t.pageState=e},setForums:function(t,e){t.availableForums=e},setForumPosts:function(t,e){t.forumPosts=e},setCurrentForum:function(t,e){t.currentForum=e},setPostStatus:function(t,e){t.isAddingPost=e},userLoggedIn:function(t,e){t.isLoggedIn=!0,t.currentUserName=e["name"],t.currentUserPFP=e["pfp"]},logout:function(t){t.isLoggedIn=!1,t.currentUserName="",t.currentUserPFP="",window.location.href="/"},setCurrentPost:function(t,e){t.currentPost=e,t.currentPostID=e.id,t.pageState="Post",t.prevState=[].concat(Object(ft["a"])(t.prevState),["forum"])},setAvailableReplies:function(t,e){t.postReplies=e}},actions:{setCurrentForumData:function(t,e){var n=t.commit;this.state.pageState="forum",n("setCurrentForum",e[0]),n("setForumPosts",e[1])},updateCurrentForum:function(t){var e=t.commit;fetch("/api/forum/".concat(this.state.currentForum),{method:"POST"}).then((function(t){return t.json()})).then((function(t){console.log(t),e("switchPage","forum"),e("setForumPosts",t)}))},updateCurrentPost:function(t){var e=this,n=t.commit;fetch("/api/post/".concat(this.state.currentPostID),{method:"POST"}).then((function(t){return t.json()})).then((function(t){console.log(t),n("setAvailableReplies",t),e.state.pageState="Post"}))},goBack:function(){var t=this.state.prevState.pop();0==this.state.prevState.length&&(this.state.prevState=["Home"]),this.state.pageState=t}},modules:{},getters:{pageState:function(t){return t.pageState},forums:function(t){return t.availableForums},getIsPosting:function(t){return t.isAddingPost}}});o["a"].config.productionTip=!1,o["a"].config.devtools=!0,new o["a"]({store:vt,render:function(t){return t(mt)}}).$mount("#app")},6218:function(t,e,n){"use strict";n("2b85")},"76c8":function(t,e,n){},"778b":function(t,e,n){},7836:function(t,e,n){"use strict";n("c885")},"85ec":function(t,e,n){},"8ad9":function(t,e,n){"use strict";n("040d")},9763:function(t,e,n){},b339:function(t,e,n){"use strict";n("778b")},bb27:function(t,e,n){},c885:function(t,e,n){},dd43:function(t,e,n){},f855:function(t,e,n){"use strict";n("bb27")},fc0a:function(t,e,n){"use strict";n("76c8")}});
//# sourceMappingURL=app.33c4fd61.js.map